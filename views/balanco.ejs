<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read</title>
</head>
<style>
    body {
        display: flex;
        justify-content: center;
    }

    table {
        border: 1px solid black;
    }

    th {
        border-bottom: 1px solid black;
    }

    .credit {
        background-color: red;
    }

    .debit {
        background-color: green;
    }

    .right {
        display: flex;
        flex-direction: column;
        margin-left: 50px;
    }
</style>

<body onload="calcula()">
    <div class="left">

        <!-- Deleta Débito -->

        <form action="/delD" method="POST">
            <table class="box">
                <h1>Débito</h1>
                <% debito.forEach(function(conta){ %>

                <!-- Mostra os Itens que componhe o Débito-->

                <tr class="box">

                    <!-- id pra excluir  -->

                    <input type="hidden" name="id" value="<%= conta._id %>">
                    <th> <button type="submit"> Deletar</button> </th>

                    <!-- Itens Visíveis da tabela -->

                    <th><%= conta.Descricao %></th>
                    <th class="debit"><%= conta.Valor %></th>
                </tr>
                <% }); %>
            </table>
        </form>

        <!-- Soma valor de débito -->
        <h3 id="somad">Aqui vai débito: </h3>

        <h1 id="balanco"> Balanço: </h1>

    </div>

    <div class="right">

        <!-- Deleta Crédito -->

        <form action="/delC" method="POST">
            <table class="box">
                <h1>Crédito</h1>
                <% credito.forEach(function(conta){ %>

                <!-- Mostra os Itens que componhe o Crédito-->

                <tr class="box">

                    <!-- id pra excluir  -->

                    <input type="hidden" name="id" value="<%= conta._id %>">
                    <th> <button type="submit"> Deletar</button> </th>

                    <!-- Itens Visíveis da tabela -->

                    <th><%= conta.Descricao %></th>
                    <th class="credit"><%= conta.Valor %></th>
                </tr>

                <% }); %>

                <!-- Deleta PL -->
                <form action="/delPL" method="POST">
                    <table class="box">

                        <h5 id="somapl">Patrimônio Líquido:</h5>

                        <% pl.forEach(function(conta){ %>

                        <!-- Mostra os Itens que componhe o patrimônio líquido -->

                        <tr class="box">

                            <!-- id pra excluir  -->

                            <input type="hidden" name="id" value="<%= conta._id %>">
                            <th> <button type="submit"> Deletar</button> </th>

                            <!-- Itens Visíveis da tabela -->

                            <th><%= conta.Descricao %></th>
                            <th class="pl"><%= conta.Valor %></th>

                        </tr>
                        <% }); %>
                    </table>
                </form>
            </table>

        </form>

        <!-- Soma valor de Crédito -->

        <h3 id="somac">Aqui vai soma valor: </h3>
    </div>










    <script>
        function calcula() {

            //Soma Crédito
            var credito = document.getElementsByClassName("credit")
            var arrayC = []
            var arrayCredito = []


            for (i = 0; i < credito.length; i++) {

                arrayC.push(credito[i].innerHTML)
                arrayCredito.push(parseInt(arrayC[i]))

            }

            var creditoTotal = arrayCredito.reduce(function (a, b) {
                return a + b
            }, 0)




            //Soma Debito
            var debito = document.getElementsByClassName("debit")
            var arrayD = []
            var arrayDebito = []


            for (i = 0; i < debito.length; i++) {

                arrayD.push(debito[i].innerHTML)
                arrayDebito.push(parseInt(arrayD[i]))

            }

            var debitoTotal = arrayDebito.reduce(function (a, b) {
                return a + b
            }, 0)

            const somaDebito = document.getElementById("somad")

            somaDebito.innerText += debitoTotal




            //Soma Patrimônio Liquido

            var PL = document.getElementsByClassName("pl")
            var arraypl = []
            var arrayPL = []


            for (i = 0; i < PL.length; i++) {

                arraypl.push(PL[i].innerHTML)
                arrayPL.push(parseInt(arraypl[i]))

            }

            var PLTotal = arrayPL.reduce(function (a, b) {
                return a + b
            }, 0)


            const somaPL = document.getElementById("somapl")

            somaPL.innerText += PLTotal

            //Mostra total de Crédito
            const somaCredito = document.getElementById("somac")

            somaCredito.innerText += creditoTotal + PLTotal

            //Mostra o total do Balanço
            var balanco = document.getElementById("balanco")

            balanco.innerText += PLTotal + creditoTotal - debitoTotal
        }
    </script>
</body>

</html>